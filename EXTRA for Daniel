pipeline {
    agent any
    parameters {
        choice(
            choices: ['Backend_testing-1' , 'frontend_testing-2','combined_testing-3',],
            description: '',
            name: 'REQUESTED_ACTION')
    }
    stages {
        stage ('Backend_testing-1') {
            when {
                // Only say hello if a "greeting" is requested
                expression { params.REQUESTED_ACTION == 'Backend_testing-1' }
            }
            steps {
                script { 
                    git 'https://github.com/photop33/project1.git'
                    bat 'start/min python3 C:\\Users\\l1313\\PycharmProjects\\project1\\web_app.py'
                    bat 'start/min python3 C:\\Users\\l1313\\PycharmProjects\\project1\\rest_app.py'
                    bat 'echo success web_app and rest_app'
                    bat 'python3 C:\\Users\\l1313\\PycharmProjects\\project1\\Backend_testing.py'
                    bat 'echo Success Backend_testing-1 ' 
                    bat 'start/min python3 C:\\Users\\l1313\\PycharmProjects\\project1\\clean_environment.py'
                    bat 'echo Success clean_environment ' 

                }
            }
        }
        stage ('frontend_testing-2') {
            when {
                // Only say hello if a "greeting" is requested
                expression { params.REQUESTED_ACTION == 'frontend_testing-2' }
            }
            steps {
                script { 
                    git 'https://github.com/photop33/project1.git'
                    bat 'start/min python3 C:\\Users\\l1313\\PycharmProjects\\project1\\web_app.py'
                    bat 'start/min python3 C:\\Users\\l1313\\PycharmProjects\\project1\\rest_app.py'
                    bat 'echo success web_app and rest_app'
                    bat 'python3 C:\\Users\\l1313\\PycharmProjects\\project1\\frontend_testing.py'
                    bat 'echo Success frontend_testing-2'  
                    bat 'start/min python3 C:\\Users\\l1313\\PycharmProjects\\project1\\clean_environment.py'
                    bat 'echo Success clean_environment ' 


                }
            }
        }
        stage ('combined_testing-3') {
            when {
                // Only say hello if a "greeting" is requested
                expression { params.REQUESTED_ACTION == 'combined_testing-3' }
            }
            steps {
                script { 
                    git 'https://github.com/photop33/project1.git'
                    bat 'start/min python3 C:\\Users\\l1313\\PycharmProjects\\project1\\web_app.py'
                    bat 'start/min python3 C:\\Users\\l1313\\PycharmProjects\\project1\\rest_app.py'
                    bat 'echo success web_app and rest_app'
                    bat 'python3 C:\\Users\\l1313\\PycharmProjects\\project1\\combined_testing.py'
                    bat 'echo Success combined_testing-3'              
                    bat 'python3 C:\\Users\\l1313\\PycharmProjects\\project1\\clean_environment.py'
                    bat 'echo Success clean_environment ' 

                }
            }
        }
    }
}
